define("moudle/ui/slidebanner/slidebanner",[],function(){var e={hasPrototype:!1,whichPlatform:function(e){var t=!1,n=!1;return/Android|webOS|iPhone|iPod|BlackBerry|iPad|SymbianOS|Windows Phone/i.test(e.navigator.userAgent)?n=!0:t=!0,{isPc:t,isPhone:n}}(window),IsAndroid:/Android|HTC/i.test(window.navigator.userAgent)||!!(window.navigator.platform+"").match(/Linux/i),createNew:function(t){var n=this,t=t||{};return n.hasPrototype||(n.init.prototype=e,n.hasPrototype=!0),new n.init(t)},init:function(e){var t=this;t.dom=e.dom||document.getElementById("slider"),t.parentDom=t.dom.parentNode,t.childrens=t.dom.children,t.bannerCount=t.childrens.length,t.curPage=e.curPage||1,this.boxWidth=this.parentDom.clientWidth,t.boxHeight=t.parentDom.clientHeight,t.startPos={x:0,y:0},t.moveDes={x:0,y:0},t.autoTime=null,t.intervalTime=e.intervalTime||3e3,t.transformSpeed=e.transformSpeed||"0.6s",t.auto=!0,typeof e.auto!="undefined"&&e.auto===!1&&(t.auto=!1),t.needTab=!0,typeof e.needTab!="undefined"&&e.needTab===!1&&(t.needTab=!1),t.tabBox=e.tabBox||undefined,t.tabItemHtml=e.tabItemHtml||"<i></i>",t.tabCurrentClass=e.tabCurrentClass||"cur",t.bannerCount>1&&(t.formated||t.formatDom(),t.bindEvent(),t.auto&&setTimeout(function(){t.autoRun()},t.intervalTime-2e3))},formatDom:function(){var e=this,t=e.childrens[0].cloneNode();last=e.childrens[e.bannerCount-1].cloneNode(),t.innerHTML=e.childrens[0].innerHTML,last.innerHTML=e.childrens[e.bannerCount-1].innerHTML,e.dom.appendChild(t),e.dom.insertBefore(last,e.childrens[0]);if(e.needTab)if(e.whichPlatform.isPc){e.tabBox||(e.tabBox=document.createElement("div"),e.tabBox.className="slide_arrow",e.parentDom.appendChild(e.tabBox));var n="<div class='fl'><i class='iconfont icon-back-font'></i></div>",r="<div class='fr'><i class='iconfont icon-go-font'></i></div>";e.tabBox.innerHTML=n+r}else{e.tabBox||(e.tabBox=document.createElement("div"),e.tabBox.className="slide_tab",e.parentDom.appendChild(e.tabBox));var i="";for(var s=0;s<e.bannerCount;s++)i+=e.tabItemHtml;e.tabBox.innerHTML=i,e.tabItems=e.tabBox.children}e.setSize(),e.toPage(),e.formated=!0},setSize:function(){var e=this;for(var t=0,n=e.childrens.length;t<n;t++)e.childrens[t].style.width=e.boxWidth+"px";e.dom.style.width=e.boxWidth*e.childrens.length+"px"},autoRun:function(){var e=this;if(!e.auto)return!1;clearTimeout(e.autoTime),e.autoTime=null,e.autoTime=setTimeout(function(){e.curPage++,e.adjustTranslate(),e.toPageAnimation(),clearTimeout(e.autoTime),e.autoRun()},e.intervalTime)},bindEvent:function(){var e=this,t=function(t){e.touchstart.call(this,t,e)},n=function(t){e.bannerCount>1&&e.touchmove.call(this,t,e)},r=function(t){e.bannerCount>1&&e.touchend.call(this,t,e)},i="onorientationchange"in window?"orientationchange":"resize";e.dom.addEventListener("touchstart",t,!1),e.dom.addEventListener("touchmove",n,!1),e.dom.addEventListener("touchend",r,!1),e.dom.addEventListener("touchcancel",r,!1),e.dom.addEventListener("webkitTransitionEnd",function(){e.isScrolling=undefined},!1),window.addEventListener("resize",function(){e.resize()},!1),e.auto&&e.IsAndroid&&(window.addEventListener("focus",function(){e.autoRun()},!1),window.addEventListener("blur",function(){clearTimeout(e.autoTime)},!1))},touchstart:function(e,t){clearTimeout(t.autoTime),t.autoTime=null,t.startPos.x=e.targetTouches[0].pageX,t.startPos.y=e.targetTouches[0].pageY,t.moveDes.x=t.moveDes.y=0,t.dom.style.webkitTransition="0s"},touchmove:function(e,t){t.moveDes.x=e.targetTouches[0].pageX-t.startPos.x,t.moveDes.y=e.targetTouches[0].pageY-t.startPos.y;var n=t.getTranslate();typeof t.isScrolling=="undefined"&&(t.isScrolling=!!(t.isScrolling||Math.abs(t.moveDes.x)<Math.abs(t.moveDes.y))),t.isScrolling!=1&&(e.preventDefault(),t.dom.style.webkitTransition="0s",t.dom.style.webkitTransform="translate3d("+(n+t.moveDes.x)+"px, 0,0)")},touchend:function(e,t){t.isScrolling=undefined,Math.abs(t.moveDes.x)>40&&(t.moveDes.x<0?t.curPage++:t.curPage--),t.adjustTranslate(t.moveDes.x),t.toPageAnimation(),t.auto&&t.autoRun()},resize:function(){var e=this;clearTimeout(e.autoTime);var t=e.parentDom.clientHeight;t!=0&&(e.boxWidth=window.innerWidth,e.boxHeight=t,e.setSize(),e.toPage(),e.auto&&e.autoRun())},getTranslate:function(){var e=this;return-(e.boxWidth*e.curPage)},setTranslate:function(e){var t=this;t.dom.style.webkitTransition="0s",t.dom.style.webkitTransform="translate3d("+e+"px, 0,0)"},adjustTranslate:function(e){var t=this,e=e||0;t.curPage>t.bannerCount?(t.curPage=1,t.setTranslate(e)):t.curPage<1&&(t.curPage=t.bannerCount,t.setTranslate(-(t.boxWidth*(t.bannerCount+1))+e))},toPage:function(){var e=this,t=e.getTranslate();e.setTranslate(t),e.needTab&&e.setTab(),e.lazyImg()},toPageAnimation:function(){var e=this,t=e.getTranslate(e);setTimeout(function(){e.dom.style.webkitTransitionDuration=e.transformSpeed,e.dom.style.webkitTransform="translate3d("+t+"px, 0,0)"},10),e.needTab&&e.setTab(),e.lazyImg()},setTab:function(){var e=this,t=e.curPage-1;for(var n=0;n<e.tabItems.length;n++)e.tabItems[n].className=e.tabItems[n].className.replace(e.tabCurrentClass,""),n==t&&(e.tabItems[n].className=e.tabItems[n].className+" "+e.tabCurrentClass)},lazyInt:!1,lazyLoaded:!1,lazyImg:function(){var e=this,t=Number(e.curPage),n=[];if(e.lazyLoaded)return;!e.lazyInt&&t==1?(n.push(e.childrens[0].querySelector("img.banner_lazy")),n.push(e.childrens[t].querySelector("img.banner_lazy")),n.push(e.childrens[t+1].querySelector("img.banner_lazy")),n.push(e.childrens[e.bannerCount+1].querySelector("img.banner_lazy")),n.push(e.childrens[e.bannerCount].querySelector("img.banner_lazy"))):(n.push(e.childrens[t+1].querySelector("img.banner_lazy")),n.push(e.childrens[t-1].querySelector("img.banner_lazy")));if(n.length>0)for(var r=0,i=n.length;r<i;r++)n[r]&&n[r].hasAttribute("data-url")&&(n[r].src=n[r].getAttribute("data-url"),n[r].removeAttribute("data-url"),n[r].className=n[r].className.replace(/banner_lazy/g,"").trim());e.dom.querySelectorAll("img.banner_lazy").length==0&&(e.lazyLoaded=!0)}};return e});